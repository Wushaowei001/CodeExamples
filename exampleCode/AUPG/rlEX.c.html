<!DOCTYPE html PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML>
<HEAD>
<TITLE>AUPG/rlEX.c</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#1F00FF" ALINK="#FF0000" VLINK="#9900DD">
<A NAME="top"> </A>
<A NAME="file1"> </A>
<H1><a href="rlEX.c">rlEX.c</a></H1>

<PRE>
<I><FONT COLOR="#B22222">/* -*- Mode:C; Coding:us-ascii-unix; fill-column:132 -*- */</FONT></I>
<I><FONT COLOR="#B22222">/**********************************************************************************************************************************/</FONT></I>
<I><FONT COLOR="#B22222">/**
   @file      rlEX.c
   @author    Mitch Richling &lt;http://www.mitchr.me/&gt;
   @Copyright Copyright 1998 by Mitch Richling.  All rights reserved.
   @brief     Simple use of readline@EOL
   @Keywords  readline
   @Std       C89

   Minimal example showing the most basic readline usage.  The huge usability improvement even such a simple usage pattern can
   impart to an application makes readline inclusion an absolute must for any application with a command line interface.  It is not
   often one gets so much for so little effort.

   This example provides up arrow and C-r functionality, but no history file support or expansion of history macros like !!.  To see
   how to implement such history support, check out rlEXH.c.  To see how to implement custom tab completion, see rlEXC.c.

   This example is compatible with even the most traditional, i.e. limited, versions of readline one is likely to encounter.
***********************************************************************************************************************************/</FONT></I>

#<B><FONT COLOR="#5F9EA0">include</FONT></B> <B><FONT COLOR="#BC8F8F">&lt;stdio.h&gt;</FONT></B>              <I><FONT COLOR="#B22222">/* I/O lib         C89   */</FONT></I>
#<B><FONT COLOR="#5F9EA0">include</FONT></B> <B><FONT COLOR="#BC8F8F">&lt;string.h&gt;</FONT></B>             <I><FONT COLOR="#B22222">/* Strings         C89   */</FONT></I>
#<B><FONT COLOR="#5F9EA0">include</FONT></B> <B><FONT COLOR="#BC8F8F">&lt;stdlib.h&gt;</FONT></B>             <I><FONT COLOR="#B22222">/* Standard Lib    C89   */</FONT></I>
#<B><FONT COLOR="#5F9EA0">include</FONT></B> <B><FONT COLOR="#BC8F8F">&lt;readline/readline.h&gt;</FONT></B>  <I><FONT COLOR="#B22222">/* readline              */</FONT></I>
#<B><FONT COLOR="#5F9EA0">include</FONT></B> <B><FONT COLOR="#BC8F8F">&lt;readline/history.h&gt;</FONT></B>   <I><FONT COLOR="#B22222">/* readline history      */</FONT></I>

<I><FONT COLOR="#B22222">/**********************************************************************************************************************************/</FONT></I>
<B><FONT COLOR="#228B22">int</FONT></B> <B><FONT COLOR="#0000FF">main</FONT></B>(<B><FONT COLOR="#228B22">int</FONT></B> argc, <B><FONT COLOR="#228B22">char</FONT></B> *argv[]) {
  <B><FONT COLOR="#228B22">char</FONT></B> *rLine;
  <B><FONT COLOR="#228B22">int</FONT></B> i;
  <B><FONT COLOR="#228B22">char</FONT></B> promptString[1024];

  <I><FONT COLOR="#B22222">/* Set our name so users can configure .inputrc to have special behavior just for this program... */</FONT></I>
  rl_readline_name = <B><FONT COLOR="#BC8F8F">&quot;rlEX&quot;</FONT></B>;

  <I><FONT COLOR="#B22222">/* Initialize the history system. */</FONT></I>
  using_history();

  <I><FONT COLOR="#B22222">/* Get rid of the default tab completion of file names -- no need to do this if file name tab completion is appropriate for your
     application. */</FONT></I>
  rl_bind_key (<B><FONT COLOR="#BC8F8F">'\t'</FONT></B>, rl_insert);

  <I><FONT COLOR="#B22222">/* Loop for for input.  A prompt will be displayed with the current line number for the input, and that input will be echoed back.
   All this with the various readline magic -- up arrow history, etc... */</FONT></I>
  <B><FONT COLOR="#A020F0">for</FONT></B>(i=1; ;i++) {
    sprintf(promptString, <B><FONT COLOR="#BC8F8F">&quot;Give me some text(%d): &quot;</FONT></B>, i);
    rLine = readline(promptString);

    <I><FONT COLOR="#B22222">/* Check for recognized commands. */</FONT></I>
    <B><FONT COLOR="#A020F0">if</FONT></B>( !(strcmp(rLine, <B><FONT COLOR="#BC8F8F">&quot;quit&quot;</FONT></B>)))
      <B><FONT COLOR="#A020F0">return</FONT></B> 0;

    <I><FONT COLOR="#B22222">/* You MUST free up the strings that readline() returns! */</FONT></I>
    free(rLine);
  } <I><FONT COLOR="#B22222">/* end for */</FONT></I>
} <I><FONT COLOR="#B22222">/* end func main */</FONT></I>
</PRE>
<HR \/>
<ADDRESS>Generated by <A HREF="http://www.iki.fi/~mtr/genscript/">GNU Enscript 1.6.5.90</A>.</ADDRESS>
</BODY>
</HTML>
