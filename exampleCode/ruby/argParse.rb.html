<!DOCTYPE html PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML>
<HEAD>
<TITLE>ruby/argParse.rb</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#1F00FF" ALINK="#FF0000" VLINK="#9900DD">
<A NAME="top"> </A>
<A NAME="file1"> </A>
<H1><a href="argParse.rb">argParse.rb</a></H1>

<PRE>
<I><FONT COLOR="#B22222">#!/usr/local/bin/ruby
</FONT></I><I><FONT COLOR="#B22222"># -*- Mode:Ruby; Coding:utf-8; fill-column:132 -*-
</FONT></I>
<I><FONT COLOR="#B22222">####################################################################################################################################
</FONT></I><I><FONT COLOR="#B22222"># @file      /home/richmit/world/my_prog/learn/ruby/argParse.rb
</FONT></I><I><FONT COLOR="#B22222"># @author    Mitch Richling &lt;http://www.mitchr.me&gt;
</FONT></I><I><FONT COLOR="#B22222"># @Copyright Copyright 2006 by Mitch Richling.  All rights reserved.
</FONT></I><I><FONT COLOR="#B22222"># @Revision  $Revision$ 
</FONT></I><I><FONT COLOR="#B22222"># @SCMdate   $Date$
</FONT></I><I><FONT COLOR="#B22222"># @brief     Using the 'optparse' module.@EOL
</FONT></I><I><FONT COLOR="#B22222"># @Keywords  ruby example command line arguments optparse
</FONT></I><I><FONT COLOR="#B22222"># @Std       Ruby 1.8
</FONT></I><I><FONT COLOR="#B22222">#
</FONT></I><I><FONT COLOR="#B22222">#            The optparse module provides a handy way to parse traditional command line arguments.  The magic of closures are
</FONT></I><I><FONT COLOR="#B22222">#            generally used as in this example to set variables based upon the argument parsing results.
</FONT></I><I><FONT COLOR="#B22222">#            
</FONT></I>
<I><FONT COLOR="#B22222">##----------------------------------------------------------------------------------------------------------------------------------
</FONT></I>
<B><FONT COLOR="#5F9EA0">require</FONT></B> <B><FONT COLOR="#BC8F8F">'optparse'</FONT></B>

myOptionParser = OptionParser.new

<I><FONT COLOR="#B22222"># Must initialize required variables for options now, so the blocks we
</FONT></I><I><FONT COLOR="#B22222"># feed to myOptionParser will know about them.
</FONT></I>
doWeNeedHelp = <B><FONT COLOR="#A020F0">false</FONT></B>

<I><FONT COLOR="#B22222"># Set up calls for various arguments:
</FONT></I>myOptionParser.on(<B><FONT COLOR="#BC8F8F">&quot;-h&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;--help&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;-H&quot;</FONT></B>) { print(<B><FONT COLOR="#BC8F8F">&quot;Got help option\n&quot;</FONT></B>); doWeNeedHelp = <B><FONT COLOR="#A020F0">true</FONT></B> }
myOptionParser.on(<B><FONT COLOR="#BC8F8F">&quot;--name aString&quot;</FONT></B>)     { |str| print(<B><FONT COLOR="#BC8F8F">&quot;Your name is: #{str}\n&quot;</FONT></B>) }

<I><FONT COLOR="#B22222"># Now that the call backs are set, we parse the arguments
</FONT></I>myOptionParser.parse(ARGV) <B><FONT COLOR="#A020F0">rescue</FONT></B> print(<B><FONT COLOR="#BC8F8F">&quot;An Error On Argument Parse..\n&quot;</FONT></B>)

<B><FONT COLOR="#A020F0">if</FONT></B>(doWeNeedHelp)
  print(<B><FONT COLOR="#BC8F8F">&quot;We have a help option!!!\n&quot;</FONT></B>)
<B><FONT COLOR="#A020F0">end</FONT></B>

print(<B><FONT COLOR="#BC8F8F">&quot;Bye!\n&quot;</FONT></B>)
</PRE>
<HR \/>
<ADDRESS>Generated by <A HREF="http://www.iki.fi/~mtr/genscript/">GNU Enscript 1.6.5.90</A>.</ADDRESS>
</BODY>
</HTML>
