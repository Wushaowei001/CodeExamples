<!DOCTYPE html PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML>
<HEAD>
<TITLE>ruby/dirAndGlob.rb</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#1F00FF" ALINK="#FF0000" VLINK="#9900DD">
<A NAME="top"> </A>
<A NAME="file1"> </A>
<H1><a href="dirAndGlob.rb">dirAndGlob.rb</a></H1>

<PRE>
<I><FONT COLOR="#B22222">#!/usr/local/bin/ruby
</FONT></I>
<I><FONT COLOR="#B22222">##
</FONT></I><I><FONT COLOR="#B22222"># @file      dirAndGlob.rb
</FONT></I><I><FONT COLOR="#B22222"># @author    Mitch Richling &lt;http://www.mitchr.me/&gt;
</FONT></I><I><FONT COLOR="#B22222"># @Copyright Copyright 2006 by Mitch Richling.  All rights reserved.
</FONT></I><I><FONT COLOR="#B22222"># @brief     Simple stuff with directories in Ruby.@EOL
</FONT></I><I><FONT COLOR="#B22222"># @Keywords  ruby example files glob
</FONT></I><I><FONT COLOR="#B22222"># @Std       Ruby 1.8
</FONT></I>
puts(<B><FONT COLOR="#BC8F8F">&quot;Current working directory: #{Dir.pwd}\n&quot;</FONT></B>)
puts(<B><FONT COLOR="#BC8F8F">&quot;Current working directory: #{Dir.getwd}\n&quot;</FONT></B>)

<I><FONT COLOR="#B22222"># Change directory with Dir.chdir(foo)
</FONT></I><I><FONT COLOR="#B22222"># Change root directory with: Dir.chroot(foo)
</FONT></I>
print(<B><FONT COLOR="#BC8F8F">&quot;Some Ruby files in this directory ([de]*.rb): &quot;</FONT></B>)
Dir.glob(<B><FONT COLOR="#BC8F8F">'[de]*.rb'</FONT></B>).each <B><FONT COLOR="#A020F0">do</FONT></B> |d| 
  print(<B><FONT COLOR="#BC8F8F">&quot;#{d} &quot;</FONT></B>)
<B><FONT COLOR="#A020F0">end</FONT></B>
puts()

<I><FONT COLOR="#B22222"># One can get a list of all files with: Dir.entries().  Note one can
</FONT></I><I><FONT COLOR="#B22222"># use Dir.pwd to get the CWD, but &quot;.&quot; works as an argument to many
</FONT></I><I><FONT COLOR="#B22222"># methods in Dir.
</FONT></I>puts(<B><FONT COLOR="#BC8F8F">&quot;Found #{Dir.entries('.').length} files in CWD\n&quot;</FONT></B>)

<I><FONT COLOR="#B22222"># One can traverse all entries with Dir.foreach() and/or Dir.each()
</FONT></I>chars=0
Dir.foreach(<B><FONT COLOR="#BC8F8F">'.'</FONT></B>) <B><FONT COLOR="#A020F0">do</FONT></B> |d| 
  chars += d.length
<B><FONT COLOR="#A020F0">end</FONT></B>
puts(<B><FONT COLOR="#BC8F8F">&quot;Found #{chars} characters in all file names in CWD&quot;</FONT></B>)

<I><FONT COLOR="#B22222"># Ruby also provides the more traditional, readdir-like, APIs near and
</FONT></I><I><FONT COLOR="#B22222"># dear to the hearts of POSIX programmers.
</FONT></I>numFiles=0
chars = 0
thePath = <B><FONT COLOR="#BC8F8F">''</FONT></B>
Dir.open(<B><FONT COLOR="#BC8F8F">'.'</FONT></B>) <B><FONT COLOR="#A020F0">do</FONT></B> |aDir| 
  thePath = aDir.path   
  <B><FONT COLOR="#A020F0">while</FONT></B> fileName = aDir.read
    numFiles += 1
    chars += fileName.length
  <B><FONT COLOR="#A020F0">end</FONT></B>
<B><FONT COLOR="#A020F0">end</FONT></B>
puts(<B><FONT COLOR="#BC8F8F">&quot;Found #{numFiles} filenames containing #{chars} characters in #{thePath} (CWD)&quot;</FONT></B>)

<I><FONT COLOR="#B22222"># Of course, Ruby also provides a non-block version of open, and a
</FONT></I><I><FONT COLOR="#B22222"># close method to go along with it.  In addition, we also have the
</FONT></I><I><FONT COLOR="#B22222"># expected rewind() and seek() methods too.  Finally, we have some
</FONT></I><I><FONT COLOR="#B22222"># gravy methods: pos, pos=, tell.
</FONT></I>
<I><FONT COLOR="#B22222"># Finally, one can create directories with Dir.mkdir(), and delete
</FONT></I><I><FONT COLOR="#B22222"># directories with any of unlink(), delete(), or rmdir().
</FONT></I></PRE>
<HR \/>
<ADDRESS>Generated by <A HREF="http://www.iki.fi/~mtr/genscript/">GNU Enscript 1.6.5.2</A>.</ADDRESS>
</BODY>
</HTML>
